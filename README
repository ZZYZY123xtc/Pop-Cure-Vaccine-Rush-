没问题！这个改动让游戏的节奏感更像 RPG 了——**“先苦后甜，神技全靠打”**。这种设计能给玩家极强的通关动力，因为每一关的奖励都是实打实的能力提升，而不是随机的运气。

我们保留**三明治布局**（为了操作体验）和**可爱的世界观**，重点重构**技能系统**和**关卡奖励流**。

这是为您定制的**《萌菌大作战 v5.0：疫苗危机（RPG 技能版）》**完整策划案。

---

# 📁 最终策划案：《萌菌大作战：疫苗危机》

**英文名**：Pop Cure: Vaccine Rush

## 一、 界面架构：三明治布局 (Sandwich UI)

屏幕分为三个互斥区域，保证操作舒适，绝无遮挡。

* **🟢 顶部仪表盘 (Header - 15% 高度)**
* **左侧**：关卡数 (Level 1-3)。
* **中间**：**🧪 疫苗研发进度** (胜利目标)。
* **右侧**：**⚡ 被动技能指示区**。
* 显示“连环闪电”的小图标。
* 显示当前 **Combo x5** 连击数（触发闪电的关键）。




* **🟡 游戏主舞台 (Game Stage - 75% 高度)**
* 纯净点击区。
* **浮动 UI**：
* **❄️ 主动技能按钮**：位于**右下角**（悬浮在游戏区之上，不遮挡底部条）。
* 状态：平时灰色/冷却倒计时 -> 就绪时发光跳动。




* **🔴 底部警戒区 (Footer - 10% 高度)**
* **中间**：**⚠️ 免疫系统负荷** (失败条件/血条)。



---

## 二、 技能系统：关卡解锁 (Progression Skills)

技能不是随机的，而是固定关卡的**通关奖励**。

### 1. 🧊 极寒领域 (Active Skill) - "救命大招"

* **获得方式**：**通关 Level 3** 后解锁。
* **交互**：屏幕右下角出现一个大的冰蓝色按钮。
* **效果**：点击后，全屏覆盖一层冰霜滤镜。**所有病毒停止移动、停止分裂、停止生成**，持续 **5秒**。
* **冷却 (CD)**：**45秒**。
* **策略**：平时忍着不用，等到怪太多点不过来，或者 Type C 乱飞的时候，开启“子弹时间”进行定点清除。

### 2. ⚡ 连环闪电 (Passive Skill) - "高手奖励"

* **获得方式**：**通关 Level 4** 后解锁。
* **交互**：右上角常驻闪电图标。
* **机制**：**Combo 系统**。
* 每点中一个病毒，Combo +1。
* 点空（点到背景），Combo 清零。
* 当 Combo 达到 **5** 的倍数时，下一次点击会触发**连锁闪电**。


* **效果**：以被点击的病毒为中心，释放一道闪电链，自动秒杀周围 **200px 范围内的所有病毒**。
* **策略**：奖励精准点击的玩家。手越稳，清怪越快。

---

## 三、 关卡流程与节奏 (Campaign Flow)

**前三关是新手期，压力逐渐增大，迫使玩家渴望变强。**

| 关卡 | 关卡名 | 新怪/机制 | 目标 | **🏆 通关奖励** | 体验目标 |
| --- | --- | --- | --- | --- | --- |
| **Lv 1** | **初次接触** | **Type A** (草莓糖)<br>

<br>图鉴引导 | 15 | 无 | 教学：点击与疫苗进度。 |
| **Lv 2** | **变异警告** | **Type B** (蓝莓聚合体)<br>

<br>图鉴引导 | 30 | 无 | 教学：厚血怪要点两下。 |
| **Lv 3** | **极速危机** | **Type C** (柠檬手里剑)<br>

<br>图鉴引导 | 50 | **🧊 极寒领域** | **压力局**。C 很快，玩家会感到吃力，急需控场技能。 |
| **Lv 4** | **冰封试炼** | A + B + C | 80 | **⚡ 连环闪电** | **爽局**。刚拿到冰冻，玩家会很想用。怪量大增，测试冰冻效果。 |
| **Lv 5** | **雷电风暴** | 全家桶 | 120 | **🔒 下一章地图** | **技巧局**。利用冰冻救命，利用闪电清场。 |

---

## 四、 胜利演出：疫苗清屏 (The Vaccine Wave)

这依然是我们最核心的爽点。

* 进度条满 100% -> 游戏暂停生成。
* 屏幕中心爆发白色光波，扩散至全屏。
* 所有病毒被光波扫过时溶解消失。
* 弹出胜利结算框。

---

# 🛠️ 开发指令集：让 Copilot 帮你写

我们保持模块化结构：`index.html`, `style.css`, `js/config.js`, `js/levels.js`, `js/game.js`, `js/virus.js`。

请按顺序发送以下 Prompt。

### 第一步：搭建三明治 UI 与 地图 (Sandwich Layout)

**目标**：把界面框架搭好，确保不遮挡。

> **指令 1 (布局重构):**
> 我正在开发《萌菌大作战》。请帮我重构 UI 布局并实现地图系统。
> 1. **HTML/CSS (三明治布局)**：
> * 修改 `index.html` 和 `style.css`。
> * 创建 `#ui-header` (固定高度 15vh, 顶部, 白底, z-index 20)。包含：关卡文本、**"疫苗研发进度"**条。
> * 创建 `#ui-footer` (固定高度 10vh, 底部, 白底, z-index 20)。包含：**"免疫系统负荷"**条。
> * `canvas` 绝对定位在中间，`top: 15vh`，高度 `75vh`。确保它完全不被 Header/Footer 遮挡。
> 
> 
> 2. **HTML (地图与弹窗)**：
> * 创建 `#map-screen` (全屏)。显示 "World 1" 和 5 个关卡节点（带星星）。
> * 创建 `#game-over` (失败) 和 `#level-complete` (胜利) 弹窗。
> 
> 
> 3. **JS (`game.js`)**：
> * 初始化时显示地图。
> * 实现 `resizeCanvas`：确保 `canvas.height` 等于 `window.innerHeight * 0.75`。
> * 引入 `localStorage` 保存 `playerProgress` (解锁关卡和星星)。
> 
> 
> 
> 

### 第二步：病毒美术与图鉴系统 (Visuals & Intro)

**目标**：把病毒画可爱，并实现新怪引导。

> **指令 2 (美术与图鉴):**
> 请更新病毒美术并实现新怪引导。
> 1. **JS (`virus.js`) - 美术升级**：
> * **Type A**: 粉色，周围画一圈小圆球（像甜甜圈）。
> * **Type B**: 紫色，画成“聚合果”（中心圆+周围紧贴的6个圆），体积较大。
> * **Type C**: 黄色，画成“圆角四角星”（手里剑），旋转速度快，半径调大以便点击。
> 
> 
> 2. **JS (`levels.js`) - 关卡配置**：
> * 配置前 5 关。
> * Level 1: `intro: 'A'`。
> * Level 2: `intro: 'B'`。
> * Level 3: `intro: 'C'`。
> 
> 
> 3. **图鉴弹窗逻辑 (`game.js`)**：
> * 创建 `#intro-modal` HTML。
> * 在 `loadLevel` 时，如果有关卡 `intro`，暂停游戏，显示弹窗。
> * 弹窗内容：病毒预览 Canvas、名称、描述、**重点提示（倒计时圈是繁殖计时）**。
> 
> 
> 
> 

### 第三步：技能系统核心逻辑 (Skills Implementation)

**目标**：实现“冰冻”和“闪电”的逻辑。

> **指令 3 (技能系统):**
> 请实现 RPG 式的技能系统。
> 1. **HTML/CSS (技能 UI)**：
> * 在 `#ui-header` 右侧添加 `#passive-skill-area`（显示闪电图标和 Combo 数）。
> * 在 `#game-container` 右下角（悬浮在 Footer 上方）添加 `#active-skill-btn`（冰冻按钮）。
> * 样式：按钮要有冷却遮罩效果。
> 
> 
> 2. **JS (`game.js`) - 状态管理**：
> * `unlockedSkills`: 数组，从 `localStorage` 读取。
> * `comboCount`: 连击数。
> * `skillCD`: 冷却计时器。
> * `isFrozen`: 全局冰冻状态。
> 
> 
> 3. **JS (`game.js`) - 技能逻辑**：
> * **🧊 极寒领域 (Active)**：
> * 点击按钮 -> `isFrozen = true`，按钮进入 CD (45s)。
> * 在 `update` 循环中：如果 `isFrozen`，病毒不移动、不更新分裂计时器。
> * 5秒后恢复。
> 
> 
> * **⚡ 连环闪电 (Passive)**：
> * 仅当 `unlockedSkills` 包含 'lightning' 时生效。
> * 点击逻辑：击中病毒 `comboCount++`；点空 `comboCount = 0`。
> * 触发：当 `comboCount % 5 === 0` 时，消除目标并触发 `chainLightning(x, y)`（消除周围 200px 病毒 + 闪电特效）。
> 
> 
> 
> 
> 4. **JS (`levels.js`) - 奖励配置**：
> * Level 3 通关奖励: `reward: 'freeze'`。
> * Level 4 通关奖励: `reward: 'lightning'`。
> * 结算时若获得新技能，弹窗提示并保存到 `localStorage`。
> 
> 
> 
> 

### 第四步：胜利特效 (Vaccine Wave)

**目标**：实现最爽的清屏效果。

> **指令 4 (胜利特效):**
> 请实现“疫苗光波”胜利动画。
> 1. **修改 `game.js**`：
> * 当 `curedCount >= levelGoal` 时，进入 `WINNING` 状态（不立即弹窗）。
> * 在 `loop` 中：绘制一个快速扩大的白色半透明圆圈（光波）。
> * 检测碰撞：所有接触到光波的病毒，播放粒子爆炸特效并移除。
> * 当光波覆盖全屏且病毒清空后，延迟 1 秒，再显示“关卡胜利”弹窗。
> 
> 
> 
> 

---

### 💡 建议开发顺序

先做 **指令 1 (UI)** 和 **指令 2 (美术)**，这样你就能玩到一个基础版、长得好看的游戏。
然后再做 **指令 3 (技能)** 和 **指令 4 (特效)**，把游戏性拉满。

这个方案既保留了操作的爽感，又有成长的期待，绝对耐玩！快让 Copilot 开工吧！🏗️